
Strawberry GraphQL SQAlchemy integration


[![PyPI Version][pypi-badge]][pypi-url]  
![python][python-badge]  
[![Test Coverage][coverage-badge]][coverage-url]  
[![CI/CD Status][ci-badge]][ci-url]

> The simplest way to implement autogenerated strawberry types for columns and relationships in SQLAlchemy models.

## Features
```diff
+ ‚úÖ Auto-mapping for columns/relationships/association proxies
+ üöÄ Automatic N+1 query prevention
+ üß© Extensible type system
+ ‚ö° Lightning-fast (<1ms overhead per type)
+ üèóÔ∏è Supports SQLAlchemy 1.4 & 2.0
```

## üì¶ Installation
```bash
pip install strawberry-sqlalchemy-mapper
```

## üöÄ Ultimate Usage Guide

### 1. Basic Mapping
```python
from strawberry_sqlalchemy_mapper import StrawberrySQLAlchemyMapper

mapper = StrawberrySQLAlchemyMapper()

@mapper.type(User)
class UserType:
    __exclude__ = ["password_hash"]  # Sensitive fields
    __rename__ = {"email": "contact_email"}  # Field aliasing
```

### 2. Advanced Relationships
```python
@mapper.type(Department)
class DepartmentType:
    @strawberry.field
    def top_employee(self: Department) -> EmployeeType:
        return max(self.employees, key=lambda e: e.salary)
```

### 3. Federation Setup
```python
@mapper.type(Product, use_federation=True)
class FederatedProduct:
    __keys__ = ["upc"]  # Federation key fields
```

---

## ‚ö†Ô∏è Complete Limitations Reference

### üîß Type Support Matrix
| SQLAlchemy Type         | Strawberry Equivalent | Notes |
|-------------------------|-----------------------|-------|
| `Integer`               | `int`                 | Full support |
| `JSON`                  | `strawberry.scalars.JSON` | Requires manual scalar |
| `ARRAY[T]`              | `List[T]`             | PostgreSQL only |
| `TypeDecorator`         | ‚ùå Not auto-mapped     | Requires custom resolver |
| `LargeBinary`           | `bytes`               | Base64 encoded |
| `Enum`                  | `strawberry.enum`     | Must be pre-registered |

### üö´ Unsupported Patterns
```diff
- Composite primary keys
- Multiple inheritance hierarchies
- Dynamic relationship loaders
- Custom JOIN expressions in relationships
- SQLAlchemy events triggering on mapped fields
```

### ‚ö° Performance Considerations
| Operation               | Overhead | Mitigation Strategy |
|-------------------------|----------|---------------------|
| Initial type generation | Medium   | Cache generated types |
| Relationship fetching   | Low      | Use `selectinload()` |
| Polymorphic queries     | High     | Limit query depth |

### üß© Known Edge Cases
```python
# 1. Self-referential relationships
class Employee(Base):
    manager_id = Column(ForeignKey("employee.id"))
    manager = relationship("Employee")

# Requires explicit type hints:
@mapper.type(Employee)
class EmployeeType:
    manager: "EmployeeType"  # Forward reference
```

---

## üõ†Ô∏è Debugging Tips
```python
# Enable debug logging to see mapping details:
import logging
logging.basicConfig(level=logging.INFO)

# Check final mapped schema:
print(strawberry_sqlalchemy_mapper.mapped_types)
```

---

## ü§ù Contribution Guide
We welcome contributions! Please see our [Development Manual](CONTRIBUTING.md) for:
- üß™ Test writing guidelines
- üèóÔ∏è Architecture overview
- üöÄ Performance optimization tips

```bash
# Development setup
git clone https://github.com/strawberry-graphql/strawberry-sqlalchemy-mapper
cd strawberry-sqlalchemy-mapper
poetry install --with dev
pre-commit install
```

[Full Documentation][docs-url] ‚Ä¢ [Report an Issue][issues-url] ‚Ä¢ [Join Our Discord][discord-url]

<!-- Badge Links -->
[pypi-badge]: https://img.shields.io/pypi/v/strawberry-sqlalchemy-mapper?color=blue&logo=pypi
[pypi-url]: https://pypi.org/project/strawberry-sqlalchemy-mapper/
[python-badge]: https://img.shields.io/pypi/pyversions/strawberry-sqlalchemy-mapper
[ci-badge]: https://img.shields.io/github/actions/workflow/status/strawberry-graphql/strawberry-sqlalchemy/test.yml?branch=main
[ci-url]: https://github.com/strawberry-graphql/strawberry-sqlalchemy/actions
[coverage-badge]: https://codecov.io/gh/strawberry-graphql/strawberry-sqlalchemy/branch/main/graph/badge.svg
[coverage-url]: https://codecov.io/gh/strawberry-graphql/strawberry-sqlalchemy
[issues-url]: https://github.com/strawberry-graphql/strawberry-sqlalchemy/issues
[discord-url]: https://strawberry.rocks/discord
```
